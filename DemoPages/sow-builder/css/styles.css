/* CM.com SoW Builder
   Brand cues are aligned to the provided palette and guidelines.
*/

:root{
  /* Neutrals */
  --ink-0: #101E1E;
  --ink-1: #212E39;
  --ink-2: #344055;
  --ink-3: #707988;
  --paper-0:#FFFFFF;
  --paper-1:#F5F5F6;

  /* Brand primaries (from the guideline images) */
  --berry:#A4009B;
  --navy:#001FFF;
  --velvet:#4D007A;

  /* Secondary accents */
  --sky:#007AFF;
  --azure:#1746DD;
  --twilight:#5F09F8;

  /* CTA accents shown in examples */
  --cta-pink:#FF6DFF;
  --cta-cyan:#00FFFF;

  /* Background gradient colors */
  --grad-a: var(--berry);
  --grad-b: var(--twilight);
  --grad-c: var(--navy);

  /* Semantics */
  --bg: var(--paper-0);
  --bg-elev: rgba(255,255,255,.78);
  --text: var(--ink-1);
  --muted: rgba(33,46,57,.72);
  --border: rgba(33,46,57,.12);
  --shadow: 0 18px 50px rgba(0,0,0,.10);

  --focus: rgba(0,31,255,.35);
  --radius: 22px;

  --h1: clamp(26px, 3vw, 34px);
  --h2: clamp(18px, 2vw, 22px);

  --ease: cubic-bezier(.2,.8,.2,1);
}

[data-theme="dark"]{
  --bg: #0B1218;
  --bg-elev: rgba(18,26,36,.70);
  --text: #E9EEF5;
  --muted: rgba(233,238,245,.72);
  --border: rgba(233,238,245,.14);
  --shadow: 0 18px 50px rgba(0,0,0,.40);
  --focus: rgba(0,255,255,.25);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: Montserrat, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  background: radial-gradient(1100px 700px at 85% 30%, rgba(0,122,255,.18), transparent 60%),
              radial-gradient(900px 600px at 15% 75%, rgba(164,0,155,.18), transparent 60%),
              linear-gradient(180deg, var(--bg), var(--bg));
  overflow-x:hidden;
}

/* Accessibility */
.skip-link{
  position:absolute; left:-999px; top:auto;
  width:1px; height:1px; overflow:hidden;
}
.skip-link:focus{
  left:16px; top:16px;
  width:auto; height:auto;
  padding:10px 14px;
  background: var(--bg);
  border:1px solid var(--border);
  border-radius:12px;
  z-index:50;
  box-shadow: var(--shadow);
}

.topbar{
  position:sticky; top:0; z-index:40;
  backdrop-filter: blur(18px);
  background: color-mix(in srgb, var(--bg) 70%, transparent);
  border-bottom: 1px solid var(--border);
}
.topbar__inner{
  max-width: 1040px;
  margin:0 auto;
  padding: 14px 18px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.brand{
  display:flex;
  align-items:center;
  justify-content:center;
  width: 100%;
  pointer-events:none;
  position: relative;
}

/* Theme logo swap */
.brand__logoimg{
  height:40px;
  width:auto;
  filter: drop-shadow(0 10px 22px rgba(0,0,0,.12));
  user-select:none;
  pointer-events:none;
  display:none;
}
:root:not([data-theme="dark"]) #brandLogoLight{ display:block; }
:root:not([data-theme="dark"]) #brandLogoDark{ display:none; }
:root[data-theme="dark"] #brandLogoLight{ display:none; }
:root[data-theme="dark"] #brandLogoDark{ display:block; }

.topbar__actions{position:absolute; right:18px;}
.icon-btn{
  pointer-events:auto;
  display:inline-flex; gap:10px; align-items:center;
  border:1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 75%, transparent);
  color: var(--text);
  padding:10px 12px;
  border-radius: 999px;
  cursor:pointer;
  transition: transform .2s var(--ease), background .2s var(--ease), border-color .2s var(--ease);
}
.icon-btn:hover{transform: translateY(-1px); border-color: color-mix(in srgb, var(--navy) 35%, var(--border));}
.icon-btn:active{transform: translateY(0px) scale(.98);}
.icon-btn:focus-visible{outline: 3px solid var(--focus); outline-offset:2px;}
.icon{font-size:18px; line-height:1}
.icon-btn__label{font-weight:700; font-size:12px; letter-spacing:.6px; text-transform:uppercase; opacity:.9}

.app{padding: 28px 18px 60px;}
.shell{max-width: 1040px; margin:0 auto;}

.shell__head{
  display:grid;
  grid-template-columns: 1.1fr .9fr;
  gap: 18px;
  align-items:end;
  margin: 18px 0 18px;
}
@media (max-width: 860px){
  .shell__head{grid-template-columns:1fr}
  .topbar__actions{position:static}
  .brand{justify-content:flex-start}
}

.titleblock{
  padding: 18px 18px 10px;
  border-radius: var(--radius);
  background: color-mix(in srgb, var(--bg) 70%, transparent);
  border: 1px solid var(--border);
  box-shadow: 0 14px 40px rgba(0,0,0,.08);
}
.h1{margin:0; font-size: var(--h1); letter-spacing: .8px;}
.sub{margin: 10px 0 0; color: var(--muted); line-height:1.5}

.progress{
  padding: 18px;
  border-radius: var(--radius);
  background: color-mix(in srgb, var(--bg) 70%, transparent);
  border: 1px solid var(--border);
  box-shadow: 0 14px 40px rgba(0,0,0,.08);
}
.progress__meta{display:flex; justify-content:space-between; align-items:center; gap:10px;}
.progress__label{font-weight:800; letter-spacing:.8px; text-transform:uppercase; font-size:12px}
.progress__pct{font-weight:700; color: var(--muted)}
.progress__bar{
  margin-top: 12px;
  height: 12px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--bg) 65%, transparent);
  border: 1px solid var(--border);
  overflow:hidden;
}
.progress__fill{
  height:100%;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg, var(--grad-a), var(--grad-b), var(--grad-c));
  transition: width .55s var(--ease);
}

/* Outer container (main boundary box) */
.cardstage{
  position: relative;
  isolation: isolate;
  border-radius: calc(var(--radius) + 6px);
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 72%, transparent);
  box-shadow: var(--shadow);
  padding: 18px;
  min-height: calc(100vh - 320px);
  padding-bottom: 22px;
}

/* Gradient glow around the outer container */
.cardstage::before{
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background:
    linear-gradient(
      120deg,
      rgba(0,255,255,.25),
      rgba(255,109,255,.25),
      rgba(0,31,255,.25)
    );
  filter: blur(22px);
  opacity: .55;
  z-index: -1;
  pointer-events: none;
}
[data-theme="dark"] .cardstage::before{ opacity: .72; }

.carddeck{
  position:relative;
  min-height: 560px;
  overflow:hidden; /* keep the stage clean. cards manage their own scroll as needed */
}

.card{
  position:absolute;
  inset:0;
  padding: 22px;
  border-radius: var(--radius);
  background: linear-gradient(180deg, var(--bg-elev), color-mix(in srgb, var(--bg) 92%, transparent));
  border: 1px solid var(--border);
  box-shadow: 0 22px 70px rgba(0,0,0,.12);
  transform: translateX(110%) scale(.98);
  opacity:0;
  pointer-events:none;
  transition: transform .55s var(--ease), opacity .55s var(--ease);

  /* Default. do NOT scroll inside most cards (fixes Setup showing a scrollbar) */
  overflow: hidden;

  /* Default breathing room above the bottom nav */
  padding-bottom: 140px;
}

.card--active{
  transform: translateX(0%) scale(1);
  opacity:1;
  pointer-events:auto;
}

.card--exit-left{
  transform: translateX(-110%) scale(.98);
  opacity:0;
}

/* Only cards that explicitly opt-in should scroll (Finish card) */
.card--scroll{
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  padding-right: 18px; /* keeps content away from the scrollbar */
}

.card__tag{
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding: 8px 12px;
  border-radius:999px;
  border:1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 70%, transparent);
  font-weight:800;
  text-transform:uppercase;
  letter-spacing:.8px;
  font-size:12px;
}

.dot{
  width:10px; height:10px;
  border-radius:999px;
  background: linear-gradient(180deg, var(--cta-cyan), var(--cta-pink));
  box-shadow: 0 10px 20px rgba(255,109,255,.18);
}

.card__title{margin: 14px 0 8px; font-size: var(--h2); letter-spacing:.2px;}
.card__help{margin: 0 0 14px; color: var(--muted); line-height:1.55}

.grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  align-items:start;
}
@media (max-width: 760px){
  .grid{grid-template-columns:1fr}
  .carddeck{min-height: 680px;}
}

.field{
  display:flex;
  flex-direction:column;
  gap: 8px;
  min-width: 0;
}

/* Card 5 spacing fix (and generally improves non-grid sections) */
.field + .field{ margin-top: 0; }
.stack .field + .field{ margin-top: 14px; }

/* Keep fields aligned in grid rows */
.grid .field{ align-self: start; }

label{
  font-weight:800;
  letter-spacing:.5px;
  text-transform:uppercase;
  font-size:12px;
}

input, textarea, select{
  font: inherit;
  color: var(--text);
  background: color-mix(in srgb, var(--bg) 84%, transparent);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px 12px;
  outline: none;
  transition: border-color .2s var(--ease), transform .2s var(--ease), box-shadow .2s var(--ease);
  min-width: 0;
}

textarea{min-height: 150px; resize: vertical;}

input:focus, textarea:focus, select:focus{
  border-color: color-mix(in srgb, var(--navy) 40%, var(--border));
  box-shadow: 0 0 0 4px var(--focus);
}

input::placeholder, textarea::placeholder{
  color: color-mix(in srgb, var(--muted) 70%, transparent);
}

.small{font-size:12px; color: var(--muted); line-height:1.5}

.callout{
  margin-top: 10px;
  margin-bottom: 14px;
  padding: 12px 14px;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: radial-gradient(600px 260px at 20% 0%, rgba(0,255,255,.14), transparent 60%),
              radial-gradient(600px 260px at 80% 100%, rgba(255,109,255,.10), transparent 60%),
              color-mix(in srgb, var(--bg) 70%, transparent);
}
.callout b{color: color-mix(in srgb, var(--text) 92%, transparent);}

.nav{
  margin-top: 16px;
  display:flex; align-items:center; justify-content:space-between;
  gap: 12px;
}
.nav__right{display:flex; gap:10px; align-items:center}

.btn{
  border:1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 78%, transparent);
  color: var(--text);
  border-radius: 999px;
  padding: 12px 16px;
  font-weight:800;
  letter-spacing:.5px;
  text-transform:uppercase;
  font-size:12px;
  cursor:pointer;
  transition: transform .2s var(--ease), border-color .2s var(--ease), box-shadow .2s var(--ease), background .2s var(--ease);
  position:relative;
  overflow:hidden;
}
.btn:hover{transform: translateY(-1px); border-color: color-mix(in srgb, var(--navy) 35%, var(--border));}
.btn:active{transform: translateY(0px) scale(.98);}
.btn:focus-visible{outline: 3px solid var(--focus); outline-offset:2px;}
.btn--primary{
  border-color: color-mix(in srgb, var(--navy) 40%, var(--border));
  background: linear-gradient(90deg, var(--grad-a), var(--grad-b), var(--grad-c));
  color: white;
  box-shadow: 0 18px 45px rgba(0,31,255,.14);
}
.btn--ghost{background: color-mix(in srgb, var(--bg) 70%, transparent);}
.btn[disabled]{opacity:.45; cursor:not-allowed; transform:none}

.hint{margin: 12px 0 0; color: var(--muted); font-size: 12px; line-height:1.5}

/* Summary */
.summary{
  display:grid;
  grid-template-columns: 1fr;
  gap: 12px;
}
.summary__item{
  padding: 14px 14px;
  border: 1px solid var(--border);
  border-radius: 16px;
  background: color-mix(in srgb, var(--bg) 74%, transparent);
}
.summary__top{display:flex; align-items:center; justify-content:space-between; gap:10px;}
.summary__title{font-weight:900; letter-spacing:.2px}
.summary__btn{
  border:none;
  background: transparent;
  color: color-mix(in srgb, var(--navy) 75%, var(--text));
  font-weight:900;
  cursor:pointer;
  padding: 6px 10px;
  border-radius: 999px;
}
.summary__btn:hover{background: color-mix(in srgb, var(--navy) 12%, transparent)}
.summary__text{
  margin-top: 10px;
  white-space: pre-wrap;
  color: color-mix(in srgb, var(--text) 92%, transparent);
  line-height:1.55;
  font-size: 14px;
}
.summary__empty{color: var(--muted); font-style: italic}

/* Badges + Summary status */
.badge{
  display:inline-flex;
  align-items:center;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 900;
  letter-spacing: .5px;
  text-transform: uppercase;
  margin-left: 8px;
  border: 1px solid color-mix(in srgb, var(--cta-cyan) 30%, var(--border));
  background: radial-gradient(220px 120px at 20% 20%, rgba(0,255,255,.14), transparent 60%),
              radial-gradient(220px 120px at 80% 90%, rgba(255,109,255,.10), transparent 60%),
              color-mix(in srgb, var(--bg) 70%, transparent);
}
.badge--warn{border-color: color-mix(in srgb, var(--cta-pink) 34%, var(--border));}
.badge--muted{
  border-color: var(--border);
  background: color-mix(in srgb, var(--bg) 74%, transparent);
  color: var(--muted);
}

.summary__status{
  padding: 12px 14px;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 74%, transparent);
}
.summary__statusline{
  color: color-mix(in srgb, var(--text) 92%, transparent);
  line-height: 1.5;
  font-size: 13px;
}

/* Stepper */
.stepper{
  margin-top: 12px;
  padding: 12px 12px;
  border-radius: var(--radius);
  background: color-mix(in srgb, var(--bg) 70%, transparent);
  border: 1px solid var(--border);
  box-shadow: 0 14px 40px rgba(0,0,0,.08);
}
.stepper__row{
  display:flex;
  flex-wrap:wrap;
  gap: 8px;
  align-items:center;
}
.stepper__step{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 78%, transparent);
  color: var(--text);
  border-radius: 999px;
  padding: 8px 10px;
  cursor:pointer;
  transition: transform .18s var(--ease), border-color .2s var(--ease), background .2s var(--ease), box-shadow .2s var(--ease);
  user-select:none;
}
.stepper__step:hover{
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--navy) 35%, var(--border));
}
.stepper__step:active{transform: translateY(0px) scale(.98);}
.stepper__step:focus-visible{outline: 3px solid var(--focus); outline-offset:2px;}

.stepper__dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--muted) 45%, transparent);
  box-shadow: none;
}
.stepper__txt{
  font-weight:900;
  letter-spacing:.6px;
  text-transform:uppercase;
  font-size: 11px;
  opacity:.9;
}

/* Active */
.stepper__step.is-active{
  border-color: color-mix(in srgb, var(--navy) 55%, var(--border));
  box-shadow: 0 10px 28px rgba(0,0,0,.10);
}
.stepper__step.is-active .stepper__dot{
  background: linear-gradient(180deg, var(--cta-cyan), var(--cta-pink));
}

/* Complete */
.stepper__step.is-complete{
  border-color: color-mix(in srgb, var(--cta-cyan) 30%, var(--border));
}
.stepper__step.is-complete .stepper__dot{
  background: linear-gradient(180deg, var(--cta-cyan), var(--cta-pink));
}

/* Optional */
.stepper__step.is-optional{opacity: .92;}

/* Mobile sizing */
@media (max-width: 760px){
  .stepper__step{padding: 8px 9px}
  .stepper__txt{font-size: 10px}
}

/* Toasts */
.toasts{
  position: fixed;
  right: 18px;
  bottom: 18px;
  display:flex;
  flex-direction:column;
  gap:10px;
  z-index:60;
}
.toast{
  padding: 12px 14px;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 76%, transparent);
  box-shadow: var(--shadow);
  max-width: 340px;
  animation: pop .18s var(--ease) both;
}
@keyframes pop{from{transform: translateY(8px); opacity:0} to{transform: translateY(0); opacity:1}}
.toast__title{font-weight:900}
.toast__msg{margin-top:6px; color: var(--muted); font-size: 12px; line-height:1.45}

/* PDF styling */
.pdfwrap{position:absolute; left:-99999px; top:-99999px;}
.pdf{
  width: 794px; /* ~A4 @ 96dpi */
  padding: 36px 42px;
  color: #111;
  background:#fff;
  font-family: Montserrat, Arial, sans-serif;
}
.pdf__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 16px;
  border-bottom: 2px solid rgba(0,0,0,.08);
  padding-bottom: 14px;
}
.pdf__logo svg,
.pdf__logo img{
  height:30px;
  width:auto;
  display:block;
}
.pdf__title{font-weight:900; font-size: 22px; letter-spacing:.6px}
.pdf__subtitle{margin-top:6px; font-size: 12px; color: rgba(0,0,0,.65)}
.pdf__body{padding-top: 14px;}
.pdf__section{margin-top: 14px;}
.pdf__h{font-weight:900; font-size: 14px; margin:0 0 6px; color: #1a1a1a;}
.pdf__p{margin:0; white-space: pre-wrap; font-size: 12px; line-height:1.55; color: rgba(0,0,0,.85);}
.pdf__footer{
  margin-top: 18px;
  padding-top: 10px;
  border-top: 1px solid rgba(0,0,0,.10);
  display:flex;
  justify-content:space-between;
  font-size: 10px;
  color: rgba(0,0,0,.6);
}